import matplotlib.pyplot as plt


t_24_low = [4400,4300,600,1550,600,500,550,1600,600,1550,600,500,550,550,600,1550,550,550,550,500,600,1550,600,500,600,500,600,1550,600,1550,600,500,550,1600,600,1550,600,500,600,500,550,1600,550,1600,550,1600,600,1550,600,1550,600,500,600,1550,600,1600,550,500,600,500,600,450,600,500,600,500,600,500,550,1600,550,500,600,500,600,500,600,450,600,500,600,500,550,1600,550,550,550,1600,600,1550,600,1550,600,1550,600,1600,550,1600,500]

t_24_med = [4350,4350,550,1600,500,600,550,1600,600,1550,550,550,600,450,550,1600,600,500,550,550,550,1600,550,550,600,450,600,1600,550,1600,550,500,600,1600,600,450,600,1550,600,500,600,1550,600,1600,550,1600,550,1600,600,1550,600,1550,600,500,550,1600,600,500,500,600,550,500,600,500,550,550,550,500,550,1600,600,500,550,550,500,550,600,500,550,550,600,450,600,1600,600,450,600,1600,550,1600,600,1550,550,1600,600,1550,600,1550,550]
t_24_high = [4500,4200,650,1500,700,400,650,1500,650,1500,650,450,650,450,650,1500,600,500,650,400,650,1500,700,400,700,400,650,1500,650,1500,700,400,650,1500,650,450,650,400,650,1500,650,1550,650,1500,600,1550,650,1500,700,1450,650,1550,600,1550,600,450,650,450,650,450,600,450,650,450,650,450,650,400,650,1500,700,400,700,400,600,450,700,400,650,450,600,450,700,1500,650,400,650,1550,650,1500,650,1500,600,1550,650,1500,650,1500,600]

t_23_low = [4450,4250,600,1550,600,450,650,1550,600,1550,600,500,600,450,600,1550,650,450,650,450,600,1550,700,400,600,450,600,1550,650,1550,600,450,600,1600,600,1550,600,500,600,450,650,1500,600,1600,600,1550,600,1550,600,1550,600,500,600,1550,600,1550,650,450,600,450,650,450,650,450,600,450,650,450,650,1500,650,450,650,1500,550,550,600,500,600,450,600,500,600,1550,650,450,600,1550,600,500,600,1550,650,1500,600,1550,600,1600,500]
t_22_low = [4400,4300,600,1550,600,500,600,1550,600,1550,600,500,600,450,600,1600,600,450,600,500,650,1500,600,500,600,500,600,1550,600,1550,600,500,600,1550,600,1550,600,500,600,450,650,1550,600,1550,600,1550,600,1550,600,1550,600,500,650,1500,600,1550,600,500,600,500,600,450,650,450,600,500,600,450,600,1600,600,1550,600,1550,600,450,650,450,600,500,600,500,600,1550,600,450,600,500,600,500,600,1550,550,1600,600,1550,600,1550,550]

x = [i for i in range(0,99)]

'''
plt.plot(x, t_24_low, color='green')
plt.plot(x, t_24_med, color='red')
plt.plot(x, t_24_high, color='yellow')

for i in range(0, 99):
    if (abs(t_24_low[i] - t_24_med[i]) > 500 or abs(t_24_low[i] - t_24_high[i]) > 500 or abs(t_24_med[i] - t_24_high[i]) > 500):
        print(i, t_24_low[i], t_24_med[i], t_24_high[i])

plt.show()
'''
'''
     35,37,39,51,53,55
low   1, 0, 0, 0, 1, 1
med   0, 1, 0, 1, 0, 1
high  0, 0, 1, 1, 1, 0
'''

temp_dict = {
                '30':[4450,4250,650,1500,650,450,600,1550,650,1500,650,450,600,500,650,1500,650,450,600,450,650,1500,650,450,650,450,650,1500,650,1500,650,450,650,1500,650,1500,650,450,650,450,550,1600,600,1550,600,1550,650,1500,650,1500,650,450,650,1500,650,1500,600,500,650,450,600,450,650,450,600,500,650,1500,600,500,600,1550,600,1550,600,500,650,400,650,450,600,500,600,450,650,1500,650,450,650,450,600,1550,650,1500,600,1550,650,1500,550],
                '29':[4350,4350,700,1500,600,450,600,1600,550,1600,600,450,650,450,650,1500,650,450,650,450,600,1550,600,450,600,500,550,1600,650,1500,650,450,650,1500,650,1550,600,450,650,450,650,1500,650,1500,650,1500,700,1500,600,1550,600,500,650,1500,650,1500,600,500,600,450,650,450,650,450,650,400,650,1500,650,450,650,1500,650,450,650,450,600,450,700,400,650,450,650,400,650,1550,650,400,600,1550,700,1500,650,1500,650,1500,650,1500,500],
                '28':[4400,4300,600,1550,600,450,650,1550,600,1550,600,450,600,500,650,1500,650,450,550,550,600,1550,600,500,550,500,600,1550,600,1550,650,450,600,1550,650,1550,600,450,650,450,600,1550,650,1500,650,1550,600,1550,600,1550,600,500,600,1550,600,1550,650,450,650,400,650,450,600,500,650,400,600,1550,700,400,650,450,650,400,650,450,650,450,600,450,600,500,650,450,600,1550,650,1500,650,1500,650,1500,650,1550,600,1550,600,1550,500],
                '27':[4450,4250,600,1550,650,450,600,1550,650,1500,650,450,650,450,600,1550,600,450,650,450,650,1500,650,450,650,450,600,1550,600,1550,600,500,650,1500,650,1500,600,500,650,450,600,1550,650,1500,600,1550,650,1500,600,1550,600,500,650,1500,650,1500,600,500,650,450,650,400,700,400,650,450,650,1500,650,450,600,450,650,1500,650,450,650,450,650,400,700,400,650,450,600,1550,650,1500,650,450,650,1500,650,1500,650,1500,700,1500,500],
                '26':[4450,4250,650,1500,650,450,650,1500,650,1500,700,400,650,450,600,1550,600,500,600,450,650,1550,650,400,650,450,600,1550,600,1550,650,450,600,1550,650,1500,650,450,600,500,650,1500,650,1500,600,1550,650,1500,650,1500,650,450,650,1500,650,1500,650,450,650,450,650,400,650,450,600,500,650,1500,650,1500,650,450,600,1550,650,400,650,450,650,450,650,400,650,450,650,450,600,1550,650,450,650,1500,650,1500,650,1500,650,1500,650],
                '25':[4400,4300,650,1500,650,450,600,1550,650,1500,600,500,600,500,600,1550,600,500,600,450,600,1550,650,450,600,500,600,1550,550,1600,600,500,600,1550,650,450,600,450,600,1600,600,1550,600,1550,600,1550,650,1500,650,1500,600,1600,600,1550,600,500,600,450,600,500,600,450,650,450,600,500,600,1550,600,1550,650,450,600,500,600,450,650,450,600,500,600,450,600,500,650,450,600,1550,600,1550,600,1550,650,1500,600,1600,600,1550,500],
                '24':[4450,4250,600,1550,600,500,650,1500,600,1550,600,500,600,500,600,1550,600,500,600,450,600,1600,600,450,600,500,600,1550,600,1550,650,450,600,1550,600,500,600,500,550,1600,600,1550,600,1550,600,1550,600,1600,600,1550,600,1550,650,1500,600,500,600,450,600,500,650,450,600,450,600,500,600,500,600,1550,650,450,600,450,650,450,600,500,600,450,600,500,600,1550,600,500,650,1500,650,1500,600,1600,600,1550,600,1550,600,1550,500],
                '23':[4450,4250,600,1600,600,450,650,1500,700,1500,600,450,600,500,600,1550,650,450,600,450,650,1550,550,500,650,450,600,1550,600,1550,650,450,600,1550,600,500,650,1500,600,500,650,1500,600,1550,650,1500,600,1600,600,1550,550,1600,650,450,600,1550,600,500,600,450,600,500,600,500,600,450,650,450,550,1600,600,500,550,1600,600,500,600,450,600,500,650,450,600,1550,600,500,600,1550,550,550,550,1600,600,1550,600,1550,600,1550,550],
                '22':[4450,4250,650,1550,600,450,650,1500,700,1500,650,400,650,450,600,1550,650,450,600,450,650,1550,600,450,600,500,650,1500,650,1500,650,450,600,1550,600,500,650,450,600,1550,600,1550,650,1500,650,1500,650,1500,650,1550,600,1550,600,1550,600,500,600,450,700,400,600,500,600,450,650,450,650,450,600,1550,650,1500,600,1550,650,450,650,450,650,400,650,450,600,1550,600,500,600,450,650,450,600,1550,650,1500,650,1550,600,1550,500],
                '21':[4500,4200,650,1550,650,400,600,1550,650,1550,600,450,650,450,600,1550,650,450,600,450,650,1550,600,450,700,400,650,1500,650,1500,700,400,700,1450,650,450,650,450,650,1500,600,1550,650,1500,650,1500,600,1600,600,1550,650,1500,650,1500,650,450,600,500,650,400,650,450,600,500,600,450,600,500,600,1550,650,1500,700,400,600,500,650,400,700,400,600,500,600,1550,600,450,650,450,600,1550,650,1500,650,1550,600,1550,600,1550,500],
                '20':[4350,4350,600,1550,600,500,600,1550,600,1550,600,500,600,450,600,1550,650,450,600,500,600,1550,650,450,600,450,600,1600,600,1550,650,400,600,1600,600,450,650,450,600,1550,650,1500,650,1550,600,1550,600,1550,600,1550,600,1550,600,1550,650,450,600,500,550,500,650,450,600,500,600,450,600,500,600,500,600,1550,600,500,600,450,600,500,600,500,600,450,600,1550,650,1550,550,500,600,1550,650,1550,600,1550,600,1550,600,1550,500],
                '19':[4450,4250,700,1500,650,400,650,1550,650,1500,600,450,700,400,650,1500,650,450,700,400,600,1550,600,500,650,400,650,1500,700,1450,650,450,650,1500,700,400,700,400,650,1500,650,1500,650,1500,650,1550,600,1550,650,1500,600,1550,650,1500,700,400,650,450,600,450,650,450,650,450,650,400,700,400,650,450,650,1500,600,1550,700,400,650,400,700,400,650,450,650,1500,650,1500,650,450,700,400,650,1500,650,1500,650,1500,650,1500,500],
                '18':[4300,4400,600,1550,600,450,650,1550,600,1550,600,450,550,550,550,1600,600,500,600,500,600,1550,600,500,550,500,600,1550,650,1500,650,450,600,1550,600,500,500,600,600,1550,600,1550,600,1550,600,1550,650,1550,600,1550,600,1550,600,1550,550,550,600,500,600,450,600,500,600,450,600,500,600,500,600,500,550,500,650,1500,600,500,550,550,600,450,650,450,550,1600,600,1550,600,1600,600,450,600,1550,600,1600,600,1550,600,1550,500],
                '17':[4400,4300,600,1550,600,500,600,1550,600,1600,550,500,600,500,600,1550,600,500,600,450,600,1600,600,450,600,500,600,1550,600,1550,600,500,650,1500,600,500,600,500,550,1600,600,1550,600,1550,600,1550,600,1600,550,1600,600,1550,600,1550,600,500,600,500,600,450,600,500,600,500,600,450,650,450,600,500,550,500,600,500,600,500,600,450,650,450,600,500,600,1550,600,1550,600,1550,650,1500,600,1550,600,1600,600,1550,550,1600,550]
            }


for _, wave_list in temp_dict.items():
    wave_list[35] = 1550
    wave_list[37] = 500
    wave_list[39] = 500
    wave_list[51] = 500
    wave_list[53] = 1550
    wave_list[55] = 1550


record = []

for i in range(0,99):
    temp = 0;
    for _, wave_list in temp_dict.items():
        if (temp == 0):
            temp = wave_list[i]
        elif (abs(temp - wave_list[i]) > 500):
            record.append(i)
            break


print("\t", end="    ")
for i in temp_dict:
    print('{0:6s}'.format(i), end="")
print()
for i in record:
    print(i, end="\t")
    for _, wave_list in temp_dict.items():
        if (wave_list[i] > 1400):
            print('{0:6d}'.format(1), end="")
        elif (wave_list[i] < 600):
            print('{0:6d}'.format(0), end="")
        else:
            print('{0:6d}'.format(-1), end="")
    print()
print()

for i in record:
    print(i, end=",")
print()
for key, wave_list in temp_dict.items():
    print(key, end=",")
    for i in record:
        if (wave_list[i] > 1400):
            print(1, end=",")
        elif (wave_list[i] < 600):
            print(0, end=",")
        else:
            print(-1, end=",")
    print()
print()

'''
        30    29    28    27    26    25    24    23    22    21    20    19    18    17
67       1     1     1     1     1     1     0     0     0     0     0     0     0     0
69       0     0     0     0     1     1     1     1     1     1     0     0     0     0
71       1     1     0     0     0     0     0     0     1     1     1     1     0     0
73       1     0     0     1     1     0     0     1     1     0     0     1     1     0
83       0     0     0     0     0     0     1     1     1     1     1     1     1     1
85       1     1     1     1     0     0     0     0     0     0     1     1     1     1
87       0     0     1     1     1     1     1     1     0     0     0     0     1     1
'''

''' TEMP
67,69,71,73,83,85,87,89
30,1,0,1,1,0,1,0,0
29,1,0,1,0,0,1,0,1
28,1,0,0,0,0,1,1,1
27,1,0,0,1,0,1,1,0
26,1,1,0,1,0,0,1,0
25,1,1,0,0,0,0,1,1
24,0,1,0,0,1,0,1,1
23,0,1,0,1,1,0,1,0
22,0,1,1,1,1,0,0,0
21,0,1,1,0,1,0,0,1
20,0,0,1,0,1,1,0,1
19,0,0,1,1,1,1,0,0
18,0,0,0,1,1,1,1,0
17,0,0,0,0,1,1,1,1
'''

''' Swing
    41,57
ON,  0,1
OFF, 1,0
'''

fanspeed_mask = [35,37,39,51,53,55]
temp_mask = [67,69,71,73,83,85,87,89]
swing_mask = [41, 57]
power_mask = [45,61]

swing = [4400,4300,600,1550,600,500,600,1550,600,1550,650,450,600,450,600,1600,600,450,650,450,600,1550,600,500,600,500,600,1550,550,1600,600,500,600,1550,550,550,600,450,650,450,600,450,650,1550,600,1550,600,1550,600,1550,600,1600,550,1600,600,1550,600,1550,600,500,550,500,600,500,600,500,600,1550,600,1550,600,1550,650,450,600,500,600,450,600,500,600,500,600,450,650,450,600,500,600,1550,600,1550,600,1550,600,1600,550,1600,500]

mode = [4400,4300,600,1550,600,450,600,1600,600,1550,600,450,600,500,650,1500,650,450,600,500,650,1500,650,450,600,450,600,1550,650,1550,600,450,650,1550,600,450,650,450,650,450,600,1550,600,1550,600,1550,650,1500,650,1500,650,1550,600,1550,600,1550,600,500,650,400,700,400,650,450,600,450,650,450,650,1500,600,500,600,1550,650,450,600,1550,600,500,600,500,600,1550,600,500,650,1500,600,450,650,1550,600,450,650,1550,600,1550,500]

for i in range(0,99):
    if (abs(swing[i]-temp_dict['18'][i]) > 500):
        flag = True
        for j in fanspeed_mask:
            if (j == i):
                flag = False
                break
        for j in temp_mask:
            if (j == i):
                flag = False
                break
        if (flag == True):
            print(i, swing[i], temp_dict['18'][i])


print()

'''
for i in range(0,99):
    if (abs(mode[i]-temp_dict['18'][i]) > 500):
        flag = True
        for j in fanspeed_mask:
            if (j == i):
                flag = False
                break
        for j in temp_mask:
            if (j == i):
                flag = False
                break
        for j in swing_mask:
            if (j == i):
                flag = False
                break
        if (flag == True):
            print(i, mode[i], temp_dict['18'][i])
print()
'''


print("ON OFF TEST")
power_on=[4450,4250,600,1550,650,450,650,1500,600,1600,600,450,600,500,600,1550,600,500,600,450,600,1600,550,500,600,500,600,1550,600,1550,600,500,650,1500,600,1550,650,450,600,1550,700,1500,600,1550,600,1550,550,1600,650,1500,600,500,600,1550,600,500,600,450,650,450,600,500,600,450,650,450,600,500,550,1600,600,500,600,450,650,450,600,500,600,450,650,450,600,1550,650,450,550,1600,600,1550,600,1600,600,1550,650,1500,600,1550,500]

power_off=[4300,4400,600,1550,650,450,600,1550,600,1550,600,500,600,450,650,1550,600,450,600,500,650,1500,600,500,600,500,600,1550,600,1550,600,500,600,1550,650,450,600,1550,600,1550,650,1500,650,1500,600,500,600,1550,700,1500,600,1550,650,450,600,450,650,450,600,450,650,1550,600,450,650,450,650,1500,700,1500,600,1550,600,450,650,450,650,450,600,450,700,400,650,450,600,450,650,450,650,1500,600,1600,600,1550,600,1550,600,1550,500]

for i in range(0,99):
    if (abs(power_on[i]-power_off[i]) > 500):
        flag = True
        for j in fanspeed_mask:
            if (j == i):
                flag = False
                break
        for j in temp_mask:
            if (j == i):
                flag = False
                break
        for j in swing_mask:
            if (j == i):
                flag = False
                break
        if (flag == True):
            print(i, power_on[i], power_off[i])
print()

'''
    45,61
ON   1,0
OFF  0,1
'''

test_wave = []
test_wave.append(temp_dict['25'])
test_wave.append(temp_dict['23'])

plt.title("Before Masking 25deg C vs 23 deg C")
plt.ylabel("IR amplitude")
plt.xlabel("time")
plt.plot(x, test_wave[0], color="red")
plt.plot(x, test_wave[1], color="green")
plt.show()

for i in fanspeed_mask:
    test_wave[0][i] = 0
    test_wave[1][i] = 0

for i in temp_mask:
    test_wave[0][i] = 0
    test_wave[1][i] = 0

for i in swing_mask:
    test_wave[0][i] = 0
    test_wave[1][i] = 0

for i in power_mask:
    test_wave[0][i] = 0
    test_wave[1][i] = 0

plt.title("After Masking 25deg C vs 23 deg C")
plt.ylabel("IR amplitude")
plt.xlabel("time")
plt.plot(x, test_wave[0], color="red")
plt.plot(x, test_wave[1], color="green")
plt.show()
